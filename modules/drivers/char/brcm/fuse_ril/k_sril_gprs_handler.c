/** * COPYRIGHT (C)  SAMSUNG Electronics CO., LTD (Suwon, Korea). 2009            * All rights are reserved. Reproduction and redistiribution in whole or  * in part is prohibited without the written consent of the copyright owner. *//** * @file	k_sril_gprs_handler.c * * @author	Sehee Park (sehee32.park@samsung.com) * * @brief	handler for gprs (OEM_FUNCTION_ID_GPRS) */#include "bcm_kril_common.h"#include "bcm_kril_capi2_handler.h"#include "bcm_kril_cmd_handler.h"#include "bcm_kril_ioctl.h"#include "k_sril_handler.h"#include "k_sril_gprs_handler.h"#include "capi2_stk_ds.h"#include "capi2_pch_msg.h"#include "capi2_gen_msg.h"#include "capi2_reqrep.h"#include "capi2_gen_api.h"void KRIL_SRIL_requestGprsHandler(void *ril_cmd, Kril_CAPI2Info_t *capi2_rsp){	KRIL_CmdList_t *pdata = (KRIL_CmdList_t*)ril_cmd;	char* rawdata = NULL;	UInt8 subCmd;	rawdata = (char*)pdata->ril_cmd->data;	subCmd = (UInt8)rawdata[1];	KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestGprsHandler -subCmd:%d\n", subCmd);	KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestGprsHandler -handler_state:%lu\n", pdata->handler_state);	switch (subCmd)	{		case OEM_GPRS_SET_DORMANCY :		{			KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestGprsHandler -OEM_GPRS_SET_DORMANCY\n");			KRIL_SRIL_requestOemSetDormancy(ril_cmd, capi2_rsp);		}			break;		case OEM_GPRS_EXEC_DUN_PIN_CTRL :			break;		case OEM_GPRS_DISCONNECT_DUN :			break;		default : 			KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestGprsHandler : Unsupported subCmd:%d Error!!!\n", subCmd);			pdata->handler_state = BCM_ErrorCAPI2Cmd;			break;	}	return;}void KRIL_SRIL_requestOemSetDormancy(void *ril_cmd, Kril_CAPI2Info_t *capi2_rsp){	KRIL_CmdList_t *pdata = (KRIL_CmdList_t*)ril_cmd;	KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestOemSetDormancy \n");	if (NULL != capi2_rsp)		KRIL_DEBUG(DBG_INFO, "BCM_RESPCAPI2Cmd::result:0x%x\n", capi2_rsp->result);	switch (pdata->handler_state)	{		case BCM_SendCAPI2Cmd:		{			ClientInfo_t clientInfo;			KRIL_DEBUG(DBG_ERROR,"KRIL_SRIL_requestOemSetDormancy, CAPI2_NetRegApi_ForcePsReleaseReq\n");			CAPI2_InitClientInfo(&clientInfo, GetNewTID(), GetClientID());			CAPI2_NetRegApi_ForcePsReleaseReq(&clientInfo);			pdata->handler_state = BCM_RESPCAPI2Cmd;		}		break;		case BCM_RESPCAPI2Cmd:		{			KRIL_DEBUG(DBG_INFO, "result:0x%x\n", capi2_rsp->result);			if(RESULT_OK != capi2_rsp->result)			{				KRIL_DEBUG(DBG_ERROR, "Fail to CAPI2_NetRegApi_ForcePsReleaseReq \n");				pdata->result = BCM_E_GENERIC_FAILURE;				pdata->handler_state = BCM_ErrorCAPI2Cmd;				break;			}			else			{				 KRIL_DEBUG(DBG_ERROR, "KRIL_SRIL_requestOemSetDormancy - RESULT_OK-> result:0x%x\n\n",  capi2_rsp->result);					}			pdata->result = BCM_E_SUCCESS;			pdata->handler_state = BCM_FinishCAPI2Cmd;		}		break;		default:		{			KRIL_DEBUG(DBG_ERROR, "handler_state:%lu error...!\n", pdata->handler_state);			pdata->handler_state = BCM_ErrorCAPI2Cmd;		}		break;	}		return;}